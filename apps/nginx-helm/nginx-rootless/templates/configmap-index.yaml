apiVersion: v1
kind: ConfigMap
metadata:
  namespace: {{ .Values.namespace }}
  name: {{ include "nginx-rootless.fullname" . }}-index
  labels:
    {{- include "nginx-rootless.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook-weight": "0"
    {{- if .Values.commonAnnotations }}
    {{- include "nginx-rootless.annotations" . | nindent 4 }}
    {{- end }}
data:
  index.html: |
    <!DOCTYPE html>
    <html>
    <head>
    <title>Welcome to nginx!</title>
    <style>
    html { color-scheme: light dark; }
    body { width: 35em; margin: 0 auto;
    font-family: Tahoma, Verdana, Arial, sans-serif; }
    </style>
    </head>
    <body>
    <h1>Welcome to nginx version <!--#echo var="NGINX_VERSION" --> !</h1>
    <h2>Pod IP: <!--#echo var="SERVER_ADDR" --></h2>

    <h2>{{ .Values.indexMessage }}</h2>
    
    <p>For online documentation and support please refer to
    <a href="http://nginx.org/">nginx.org</a>.<br/>
    Commercial support is available at
    <a href="http://nginx.com/">nginx.com</a>.</p>
    
    <p><em>Thank you for using nginx.</em></p>
    </body>
    </html>
